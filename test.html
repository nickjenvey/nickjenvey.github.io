<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hover Effects Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .logo, .links {
            margin: 20px;
        }

        .links a {
            font-size: 20px;
            margin-right: 10px;
            color: #333;
            text-decoration: none;
        }

        .logo {
            width: 200px;
            height: 100px;
            background-color: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 50px;
        }

        .logo svg {
            width: 100%;
            height: 100%;
        }

        .logo path {
            transition: fill 0.5s ease;
        }
    </style>
</head>
<body>

    <div id="logo-container" class="logo">
        <!-- Logo SVG -->
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path d="M10 10 H 90 V 90 H 10 Z" fill="black"/>
        </svg>
    </div>

    <div id="links" class="links">
        <a href="#">Link 1</a>
        <a href="#">Link 2</a>
        <a href="#">Link 3</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/dynamics.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tinycolor/1.4.1/tinycolor.min.js"></script>

    <script>
        // Hover effect on logo
        function animateCrazyLogo() {
            let el = document.querySelector('#logo-container');
            let box = el.getBoundingClientRect();
            let count = 10 + Math.random() * 10;
            let masks = createMasksWithStripes(count, box, Math.round(100 / count));
            let clonedEls = [];

            for (let i = 0; i < masks.length; i++) {
                let clonedEl = cloneAndStripeElement(el, masks[i], document.body);
                let path = clonedEl.querySelector('path');
                let color = tinycolor(`hsl(${Math.round(Math.random() * 360)}, 80%, 65%)`);
                dynamics.css(path, {
                    fill: color.toRgbString(),
                });
                clonedEls.push(clonedEl);
            }

            for (let i = 0; i < clonedEls.length; i++) {
                let clonedEl = clonedEls[i];
                let d = Math.random() * 100;

                dynamics.setTimeout(function() {
                    clonedEl.style.display = '';
                    dynamics.css(clonedEl, {
                        translateX: Math.random() * 100 - 50,
                    });
                }, d);

                dynamics.setTimeout(function() {
                    dynamics.css(clonedEl, {
                        translateX: Math.random() * 20 - 10,
                    });
                }, d + 50);

                dynamics.setTimeout(function() {
                    dynamics.css(clonedEl, {
                        translateX: Math.random() * 5 - 2.5,
                    });
                }, d + 100);

                dynamics.setTimeout(function() {
                    document.body.removeChild(clonedEl);
                }, d + 150);
            }
        };

        function logoAnimationLoop() {
            dynamics.setTimeout(function() {
                animateCrazyLogo();
                logoAnimationLoop();
            }, 100 + Math.random() * 5000);
        };

        dynamics.setTimeout(logoAnimationLoop, 4000);
        document.querySelector('#logo-container').addEventListener('mouseover', animateCrazyLogo);

        // Hover effect on links
        let linkEls = document.querySelectorAll('.links a');

        function handleMouseOver(e) {
            let el = e.target;
            while (el && el.tagName.toLowerCase() !== 'a') {
                el = el.parentNode;
            }
            if (!el) {
                return;
            }
            let r = animateLink(el);

            let handleMouseOut = function(e) {
                el.removeEventListener('mouseout', handleMouseOut);
                r.stop();
            }

            el.addEventListener('mouseout', handleMouseOut);
        }

        function animateLink(el) {
            let animating = true;
            let box = el.getBoundingClientRect();

            let animate = function() {
                let masks = createMasksWithStripes(3, box, 3);
                let clonedEls = [];

                for (let i = 0; i < masks.length; i++) {
                    let clonedEl = cloneAndStripeElement(el, masks[i], document.body);
                    let childrenEls = Array.prototype.slice.apply(clonedEl.querySelectorAll('path'));
                    childrenEls.push(clonedEl);
                    for (let k = 0; k < childrenEls.length; k++) {
                        let color = tinycolor(`hsl(${Math.round(Math.random() * 360)}, 80%, 65%)`);
                        let rgb = color.toRgbString();
                        dynamics.css(childrenEls[k], {
                            color: rgb,
                            fill: rgb,
                        });
                    }
                    clonedEl.style.display = '';
                    clonedEls.push(clonedEl);
                }

                for (let i = 0; i < clonedEls.length; i++) {
                    let clonedEl = clonedEls[i];
                    dynamics.css(clonedEl, {
                        translateX: Math.random() * 10 - 5,
                    });

                    dynamics.setTimeout(function() {
                        dynamics.css(clonedEl, {
                            translateX: 0,
                        });
                    }, 50);

                    dynamics.setTimeout(function() {
                        dynamics.css(clonedEl, {
                            translateX: Math.random() * 5 - 2.5,
                        });
                    }, 100);

                    dynamics.setTimeout(function() {
                        document.body.removeChild(clonedEl);
                    }, 150);
                }

                dynamics.setTimeout(function() {
                    if(animating) {
                        animate();
                    }
                    for (let i = 0; i < masks.length; i++) {
                        let maskEl = document.querySelector(`#${masks[i]}`);
                        maskEl.parentNode.removeChild(maskEl);
                    }
                }, Math.random() * 1000);
            };

            animate();

            return {
                stop: function() {
                    animating = false;
                },
            };
        };

        if (!('ontouchstart' in window)) {
            for (let i = 0; i < linkEls.length; i++) {
                linkEls[i].addEventListener('mouseover', handleMouseOver);
            }
        }
    </script>
</body>
</html>
